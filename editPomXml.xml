<project name="editPomXml" basedir="." default="editPom" xmlns:if="ant:if" xmlns:unless="ant:unless">
    <target name="editPom" >
        <description description="Takes `kotlin.version` and `pom.name` as parameters"/>
        <property name="pom.name" value="${basedir}/mavenBasedProject/pom.xml"/>
        <available property="isTherePomXml" file="${pom.name}" value="true"/>
        <replaceregexp file="${pom.name}"
                       match="&lt;kotlin\.version&gt;.*&lt;\/kotlin\.version&gt;"
                       replace="&lt;kotlin\.version&gt;${kotlin.version}&lt;\/kotlin\.version&gt;"
                       byline="true" if:true="${isTherePomXml}"/>
        <condition property="isDevRepPresent" value="true" if:true="${isTherePomXml}">
            <resourcecontains resource="${pom.name}"
                              substring="kotlin-dev"
                              casesensitive="false"/>
        </condition>
        <echo message="isDevRepPresent = ${isDevRepPresent}"/>
        <replaceregexp file="${pom.name}"
                       match="&lt;\/properties&gt;"
                       replace="&lt;\/properties&gt;
&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;kotlin-dev&lt;\/id&gt;
        &lt;url&gt;https\:\/\/dl\.bintray\.com\/kotlin\/kotlin-dev&lt;\/url&gt;
        &lt;releases&gt;
            &lt;enabled&gt;true&lt;\/enabled&gt;
        &lt;\/releases&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;\/enabled&gt;
        &lt;\/snapshots&gt;
    &lt;\/repository&gt;
&lt;\/repositories&gt;
&lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
        &lt;id&gt;kotlin-dev&lt;\/id&gt;
        &lt;url&gt;https\:\/\/dl\.bintray\.com\/kotlin\/kotlin-dev&lt;\/url&gt;
        &lt;releases&gt;
            &lt;enabled&gt;true&lt;\/enabled&gt;
        &lt;\/releases&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;\/enabled&gt;
        &lt;\/snapshots&gt;
    &lt;\/pluginRepository&gt;
&lt;\/pluginRepositories&gt;"
                       byline="true" unless:true="${isDevRepPresent}"/>
    </target>
</project>